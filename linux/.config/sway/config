include /etc/sway/config.d/*
include ~/.config/i3/config

seat seat0 xcursor_theme "Adwaita" 24

input type:touchpad {
    tap enabled
    tap_button_map lrm
    drag disabled
}

input type:keyboard {
    xkb_layout "gb,ir"
    xkb_model "pc105"
    xkb_options "grp:rctrl_rshift_toggle"
}

input "12815:20565:RDR_IQUNIX_MG65_Mechanical_Keyboard" {
    xkb_layout "us,ir"
    xkb_model "pc104"
    xkb_options "grp:rctrl_rshift_toggle"
}

exec swayidle -w \
    timeout 900 'betterblurlock' \
    timeout 1800 'swaymsg "output * dpms off"' \
            resume 'swaymsg "output * dpms on"' \
    before-sleep 'betterblurlock'

bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +1000
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -1000
bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym XF86MonBrightnessUp exec brightnessctl set +5%
bindsym XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym XF86Display exec kanshictl switch laptop-only

bindswitch --reload --locked lid:on output eDP-1 enable dpms on
bindswitch --reload --locked lid:off output eDP-1 disable

exec kanshi
exec_always kanshictl reload

# TODO is the always needed? usually useful when (dis)connecting monitors
exec_always waypaper --restore
exec_always budsctl daemon
exec_always ~/.local/bin/kill-until-dead waybar && waybar
exec_always ~/.local/bin/kill-until-dead dunst && dunst -config ~/.config/dunst/dunstrc
