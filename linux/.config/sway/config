include /etc/sway/config.d/*
include ~/.config/i3/config

bindsym --no-repeat $mod+z exec slurp | grim -g - - | wl-copy -t image/png
bindsym --no-repeat $mod+Shift+z exec exec slurp | grim -g - "$HOME/Pictures/screenshot-$(date +%F_%T).png" && notify-send "üì∏ Screenshot region saved to ${HOME}/Pictures"

for_window [app_id="kitty"] title_format "üêà"
for_window [app_id="kitty-app"] title_format %title
for_window [all] title_window_icon padding 5px
for_window [app_id="fzfmenu"] floating enable, resize set 750px 375px, move position center
for_window [app_id="kitty-app"] floating enable, resize set 750px 375px, move position center
for_window [app_id="(?i)pavucontrol"] floating enable
for_window [app_id="anki"] floating enable
for_window [app_id="waypaper"] floating enable, move position center
for_window [app_id="Zoom Workplace"] floating enable, move position center
# for_window [name="Transmission"] floating enable, move position center

input type:touchpad {
    tap enabled
    tap_button_map lrm
    drag disabled
}

input type:keyboard {
    xkb_layout "gb,ir"
    xkb_model "pc105"
    xkb_options "grp:rctrl_rshift_toggle"
}

input "12815:20565:RDR_IQUNIX_MG65_Mechanical_Keyboard" {
    xkb_layout "us,ir"
    xkb_model "pc104"
    xkb_options "grp:rctrl_rshift_toggle"
}

exec swayidle -w \
    timeout 900 'betterblurlock' \
    timeout 1800 'swaymsg "output * dpms off"' \
            resume 'swaymsg "output * dpms on"' \
    before-sleep 'betterblurlock'

# TODO: make machine specific?
# this is for matebook 14s
# bindsym XF86AudioRaiseVolume exec pamixer --increase 5
# bindsym XF86AudioLowerVolume exec pamixer --decrease 5
# bindsym XF86AUdioMute exec pamixer --toggle-mute

bindsym XF86AudioRaiseVolume exec pactl set-sink-volume @DEFAULT_SINK@ +1000
bindsym XF86AudioLowerVolume exec pactl set-sink-volume @DEFAULT_SINK@ -1000
bindsym XF86AudioMute exec pactl set-sink-mute @DEFAULT_SINK@ toggle
bindsym XF86AudioMicMute exec pactl set-source-mute @DEFAULT_SOURCE@ toggle
bindsym XF86MonBrightnessUp exec brightnessctl set +5%
bindsym XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym XF86Display exec kanshictl switch laptop-only

exec kanshi
exec_always kanshictl reload

# TODO is the always needed? usually useful when (dis)connecting monitors
exec_always waypaper --restore
exec_always ~/.local/bin/kill-until-dead waybar && waybar
