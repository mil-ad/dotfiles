#!/usr/bin/env bash

# A rofi wrapper script for various functionality that I don't want to put
# behind an explicit keybinding.

# modified version of https://github.com/LukeSmithxyz/voidrice/blob/8cbd259bc1b31cb17e5d6bf9fba59dfb45ada224/.local/bin/sysact

set -x

assert_installed uvx xkill swaymsg

menu_items=(
    "ğŸ¤– Mods History"
    "âš™ï¸ Edit dotfiles"
    "ğŸ Python"
    "ğŸ”’ lock"
    "ğŸ’¤ sleep"
    # "ğŸ”« xkill"
    "â™»ï¸ restart sway"
    "ğŸ¨ color picker"
    "ğŸ“¹ record area"
    "ğŸ“¸ screenshot program"
    "ğŸ–– (un)split monitor"
    "ğŸ”„ switch monitor input"
    "ğŸšª logout"
    "ğŸš€ reboot"
    "ğŸ» hibernate"
    "ğŸ–¥ power off"
)

selected_option=$(printf "%s\n" "${menu_items[@]}" | rofimenu)

case "$selected_option" in
    "ğŸ¤– Mods History") ~/.local/bin/kitty-app mods_show;;
    "âš™ï¸ Edit dotfiles") kitty-app hx ~/.dotfiles ;;
    "ğŸ Python") ~/.local/bin/kitty-app uvx --with pandas --with numpy --with matplotlib ptpython;;
    "ğŸ¨ color picker") hyprpicker --autocopy ;;
    'ğŸ“¹ record area') ~/.local/bin/record-screen-area-start ;;
    "ğŸ“¸ screenshot program") ~/.local/bin/screenshot-window-to-clipboard ;;
    'ğŸ”’ lock') ~/.local/bin/betterblurlock ;;
    'ğŸ’¤ sleep') systemctl suspend ;;
    'ğŸ» hibernate')  systemctl hibernate ;;
    'ğŸšª logout') rofi-confirm && swaymsg exit ;;
    'ğŸ”« xkill') xkill ;;
    'ğŸ–– (un)split monitor') ~/.local/bin/toggle_virtual_monitors ;;
    "ğŸ”„ switch monitor input") ~/.local/bin/switch-monitor-input ;;
    'â™»ï¸ restart sway') swaymsg reload ;;
    'ğŸš€ reboot')  rofi-confirm && systemctl reboot ;;
    'ğŸ–¥ power off') systemctl poweroff ;;
    *) exit 1 ;;
esac
