#!/usr/bin/env bash

[[ -f "$HOME/.tokens" ]] && source "$HOME/.tokens"

assert_installed gum mods
assert_defined ANTHROPIC_API_KEY

get_prompt() {
    gum input --placeholder="Prompt ..." --prompt="ðŸ§‘ " --no-show-help --cursor.foreground="#d79921"
}

first_prompt=$(get_prompt) && printf "ðŸ§‘ %s\nðŸ¤–\n" "$first_prompt" && mods <<< "$first_prompt" || exit

while true; do
    next_prompt=$(get_prompt) && printf "ðŸ§‘ %s\nðŸ¤–\n" "$next_prompt" && mods --continue-last <<< "$next_prompt" || break
done
