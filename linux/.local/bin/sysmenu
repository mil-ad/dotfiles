#!/usr/bin/env bash

# A rofi wrapper script for various functionality that I don't want to put
# behind an explicit keybinding.

# modified version of https://github.com/LukeSmithxyz/voidrice/blob/8cbd259bc1b31cb17e5d6bf9fba59dfb45ada224/.local/bin/sysact

set -x

assert_installed uvx xkill swaymsg

menu_items=(
    "🤖 Mods History"
    "⚙️ Edit dotfiles"
    "⚙️ Edit scripts"
    "🐍 Python"
    # "🔫 xkill"
    "🎨 color picker"
    "📹 record area"
    "📸 screenshot program"
    "🖖 (un)split monitor"
    "🔄 switch monitor input"
    "♻️ restart sway"
    "🚪 logout"
    "🚀 reboot"
    "🔒 lock"
    "💤 sleep"
    "🐻 hibernate"
    "🖥 power off"
)
selected_option=$(printf "%s\n" "${menu_items[@]}" | rofimenu)

case "$selected_option" in
    "🤖 Mods History") ~/.local/bin/kitty-app mods_show;;
    "⚙️ Edit dotfiles") KITTY_EXTRA_OPTS="--class=hx" kitty-app hx ~/.dotfiles ;;
    "⚙️ Edit scripts") KITTY_EXTRA_OPTS="--class=hx" kitty-app hx ~/.scripts ;;
    "🐍 Python") ~/.local/bin/kitty-app 'uvx --with pandas --with numpy --with matplotlib ptpython 1>&2 2>/dev/null';;
    "🎨 color picker") hyprpicker --autocopy ;;
    '📹 record area') ~/.local/bin/record-screen-area-start ;;
    "📸 screenshot program") ~/.local/bin/screenshot-window-to-clipboard ;;
    '🔒 lock') ~/.local/bin/betterblurlock ;;
    '💤 sleep') systemctl suspend ;;
    '🐻 hibernate')  systemctl hibernate ;;
    '🚪 logout') rofi-confirm && swaymsg exit ;;
    # '🔫 xkill') xkill ;;
    '🖖 (un)split monitor') ~/.local/bin/toggle_virtual_monitors ;;
    "🔄 switch monitor input") ~/.local/bin/switch-monitor-input ;;
    '♻️ restart sway') swaymsg reload ;;
    '🚀 reboot')  rofi-confirm && systemctl reboot ;;
    '🖥 power off') rofi-confirm && systemctl poweroff ;;
    *) exit 1 ;;
esac
