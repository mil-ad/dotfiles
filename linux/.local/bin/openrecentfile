#!/usr/bin/env bash

assert_installed rofimenu

file=$(fd --type f --follow --no-ignore-vcs \
    -e html \
    -e pdf \
    -e epub \
    -e flac \
    -e mp3 \
    -e mp4 \
    -e avi \
    -e mkv \
    -e wav \
    -e png \
    -e jpg -e jpeg \
    --changed-within 6d -X ls -t | rofimenu -kb-accept-alt "" -kb-custom-1 "Shift+Return")

exit_code=$?

if [ $exit_code -eq 0 ]; then
    open "$file"
elif  [ $exit_code -eq 10 ]; then
    open $(dirname "$file")
fi
